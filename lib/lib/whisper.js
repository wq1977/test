var _models=require('./models');var _effects=require('redux-saga/effects');var _marked=regeneratorRuntime.mark(subscribe),_marked2=regeneratorRuntime.mark(whisperSaga);var Shh=require('web3-shh');var shh=new Shh('ws://52.221.202.146:8546');_models.store.dispatch({type:'new chatroom',payload:[{key:'0x4584c683952ebd019cb339875cb3e68102e3b490d1704b1a251ea50fc7cb9395',title:'乌镇灌水区'},{key:'0x22f1f82850b6cea23ce113bad91de9cab44af25ab82e6079b96a8af03894da48',title:'场外交易区'},{key:'0xe45921c7a920f4a907db67e5352107edeea39f3d769f6fa34e850798088c15cc',title:'跳蚤市场区'}]});function subscribe(action){return regeneratorRuntime.wrap(function subscribe$(_context){while(1){switch(_context.prev=_context.next){case 0:action.payload.forEach(function(room){shh.subscribe('messages',{symKeyID:room.key},console.log);});_context.next=3;return 0;case 3:case'end':return _context.stop();}}},_marked,this);}function whisperSaga(){return regeneratorRuntime.wrap(function whisperSaga$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return(0,_effects.takeEvery)('new chatroom',subscribe);case 2:case'end':return _context2.stop();}}},_marked2,this);}_models.saga.run(whisperSaga);